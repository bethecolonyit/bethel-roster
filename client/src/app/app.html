<mat-sidenav-container class="app-shell">
  <!-- SIDE NAV -->
  <mat-sidenav
  *ngIf="!isLoginPage"
  #sidenav
  class="app-sidenav"
  fixedInViewport
  [mode]="(isHandset$ | async) ? 'over' : 'side'"
  [opened]="(isHandset$ | async) ? false : !isCollapsed"
  [class.collapsed]="!(isHandset$ | async) && isCollapsed"
>
    <!-- Brand / Logo -->
    <mat-toolbar color="primary" class="app-sidenav-header">
      <span class="logo" *ngIf="!isCollapsed">Menu</span>
      <mat-icon *ngIf="isCollapsed">dashboard</mat-icon>
    </mat-toolbar>

    <!-- NAV LINKS -->
    <mat-nav-list>
      <a
        mat-list-item
        routerLink="/dashboard"
        routerLinkActive="active-link"
        [routerLinkActiveOptions]="{ exact: true }"
      >
        <mat-icon matListItemIcon>dashboard</mat-icon>
        <span class="menu-label">Dashboard</span>
      </a>
      <a
        mat-list-item
        routerLink="/students"
        routerLinkActive="active-link"
      >
        <mat-icon matListItemIcon>groups</mat-icon>
        <span class="menu-label">Students</span>
      </a>
      <a
        mat-list-item
        routerLink="/residential"
        routerLinkActive="active-link"
        *ngIf="auth.isAdmin"
      >
        <mat-icon matListItemIcon>apartment</mat-icon>
        <span class="menu-label">Residential</span>
      </a>
      <a
        mat-list-item
        routerLink="/users"
        routerLinkActive="active-link"
        *ngIf="auth.isAdmin"
      >
        <mat-icon matListItemIcon>badge</mat-icon>
        <span class="menu-label">Users</span>
      </a>
    </mat-nav-list>
  </mat-sidenav>

  <!-- MAIN CONTENT -->
  <mat-sidenav-content>
    <!-- TOP APP BAR -->
<mat-toolbar color="primary" class="app-toolbar">
  <!-- Hamburger: only when sidenav exists -->
  <button
    *ngIf="!isLoginPage"
    type="button"
    mat-icon-button
    (click)="toggleSidebar()"
    aria-label="Toggle navigation"
  >
    <mat-icon>menu</mat-icon>
  </button>

  <span class="app-title">Bethel Roster</span>

  <span class="spacer"></span>

  <!-- Theme toggle: you can keep this on login if you like -->
  <button
    mat-icon-button
    (click)="toggleTheme()"
    aria-label="Toggle theme"
  >
    <mat-icon>{{ isDarkMode ? 'dark_mode' : 'light_mode' }}</mat-icon>
  </button>

  <!-- Right-side actions: probably hide on login too -->
  <button
    *ngIf="!isLoginPage"
    mat-icon-button
    aria-label="Notifications"
  >
    <mat-icon>notifications</mat-icon>
  </button>

  <button
    *ngIf="!isLoginPage"
    mat-icon-button
    aria-label="User account"
  >
    <mat-icon>account_circle</mat-icon>
  </button>

  <button
    *ngIf="!isLoginPage"
    mat-icon-button
    (click)="onLogout()"
    aria-label="Logout"
  >
    <mat-icon>logout</mat-icon>
  </button>
</mat-toolbar>

    <!-- Routed views render here (login OR dashboard OR students, etc.) -->
    <router-outlet></router-outlet>
  </mat-sidenav-content>
</mat-sidenav-container>
